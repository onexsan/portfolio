(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{358:function(t,e){},389:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"edit-field"},[t._m(0),r("div",{staticClass:"edit-field__form"},[r("form",{staticClass:"project-form",on:{reset:function(e){return e.preventDefault(),t.hideAddingCard(e)},submit:function(e){return e.preventDefault(),t.addWorkCard(t.newWork)}}},[r("div",{staticClass:"project-form__container"},[r("div",{staticClass:"project-form__column"},[r("input",{staticClass:"add-image__input",attrs:{id:"project-image",type:"file"},on:{change:t.addPhoto}}),t.renderedPhoto?r("div",{staticClass:"project-form__block"},[r("div",{staticClass:"rendered-image__wrapper"},[r("div",{staticClass:"rendered-image",style:t.renderedBackground}),r("label",{staticClass:"rendered-image__label",attrs:{for:"project-image"}},[t._v("Изменить превью")])])]):r("div",{staticClass:"project-form__add-image"},[r("div",{staticClass:"add-image__desc"},[r("p",[t._v("Щелкните для загрузки изображения")]),r("label",{staticClass:"form-btn",attrs:{for:"project-image"}},[t._v("Загрузить")]),r("tooltip-input",{attrs:{errorText:t.validation.firstError("newWork.photo")}})],1)])]),r("div",{staticClass:"project-form__column"},[r("div",{staticClass:"project-form-row"},[r("label",{staticClass:"form__label",attrs:{for:"project-title"}},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.title,expression:"newWork.title"}],staticClass:"form__input",attrs:{type:"text",name:"title",id:"project-title",placeholder:"Название проекта"},domProps:{value:t.newWork.title},on:{input:function(e){e.target.composing||t.$set(t.newWork,"title",e.target.value)}}}),r("tooltip-input",{attrs:{errorText:t.validation.firstError("newWork.title")}})],1),r("div",{staticClass:"project-form-row"},[r("label",{staticClass:"form__label",attrs:{for:"project-link"}},[t._v("Ссылка")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.link,expression:"newWork.link"}],staticClass:"form__input",attrs:{type:"text",name:"link",id:"project-link",placeholder:"Ссылка на проект"},domProps:{value:t.newWork.link},on:{input:function(e){e.target.composing||t.$set(t.newWork,"link",e.target.value)}}}),r("tooltip-input",{attrs:{errorText:t.validation.firstError("newWork.link")}})],1),r("div",{staticClass:"project-form-row project-form-row--textarea"},[r("label",{staticClass:"form__label form__label--textarea",attrs:{for:"project-desc"}},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newWork.description,expression:"newWork.description"}],staticClass:"form__input form__input--textarea",attrs:{name:"desc",id:"project-desc",placeholder:"Описание проекта"},domProps:{value:t.newWork.description},on:{input:function(e){e.target.composing||t.$set(t.newWork,"description",e.target.value)}}}),r("tooltip-input",{attrs:{errorText:t.validation.firstError("newWork.description")}})],1),r("div",{staticClass:"project-form-row"},[r("div",{staticClass:"form-tags__wrapper"},[r("label",{staticClass:"form__label",attrs:{for:"project-tags"}},[t._v("Добавление тега")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.techs,expression:"newWork.techs"}],staticClass:"form__input",attrs:{type:"text",name:"tags",id:"project-tags",placeholder:"jQuery, Vue.js, HTML5"},domProps:{value:t.newWork.techs},on:{input:function(e){e.target.composing||t.$set(t.newWork,"techs",e.target.value)}}}),r("tooltip-input",{attrs:{errorText:t.validation.firstError("newWork.techs")}}),r("projects-tags",{attrs:{techs:t.newWork.techs,tagButton:!0},on:{updateTag:t.updateTag}})],1)]),t._m(1)])])])])])};o._withStripped=!0;var n=r(93),i=r(356),a=r.n(i);function s(t,e,r,o,n,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(o,n)}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){l(t,e,r[e])})}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=a.a.Validator,u={mixins:[a.a.mixin],components:{projectsTags:function(){return r.e(3).then(r.bind(null,393))},tooltipInput:function(){return r.e(0).then(r.bind(null,387))}},props:{work:Object},data:function(){return{renderedPhoto:"",newWork:c({},this.work)}},validators:{"newWork.title":function(t){return d.value(t).required("Заполните название")},"newWork.link":function(t){return d.value(t).required("Добавьте ссылку")},"newWork.description":function(t){return d.value(t).required("Заполните описание")},"newWork.techs":function(t){return d.value(t).required("Добавьте теги")},"newWork.photo":function(t){return d.value(t).required("Добавьте фото")}},methods:c({},Object(n.b)("works",["addWork","updateWork"]),Object(n.b)("tooltip",["showTooltip"]),{hideAddingCard:function(){this.$emit("hideAddingCard")},addPhoto:function(t){var e=this;this.newWork.photo=t.target.files[0];var r=new FileReader;try{r.readAsDataURL(this.newWork.photo),r.onload=function(){e.renderedPhoto=r.result}}catch(t){}},addWorkCard:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$validate();case 2:if(!t.sent){t.next=23;break}if(t.prev=3,!Object.keys(this.newWork).some(function(t){return r.newWork[t]!==r.work[t]})){t.next=13;break}if(!this.newWork.id){t.next=11;break}return t.next=9,this.updateWork(this.newWork);case 9:t.next=13;break;case 11:return t.next=13,this.addWork(this.newWork);case 13:this.showTooltip({type:"success",message:"Работа успешно добавлена"}),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),e=t.t0.message,this.showTooltip({type:"error",message:e});case 20:return t.prev=20,this.$emit("hideAddingCard"),t.finish(20);case 23:case"end":return t.stop()}},t,this,[[3,16,20,23]])}),function(){var e=this,r=arguments;return new Promise(function(o,n){var i=t.apply(e,r);function a(t){s(i,o,n,a,c,"next",t)}function c(t){s(i,o,n,a,c,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),updateTag:function(t){this.newWork.techs=t}}),created:function(){this.newWork=c({},this.work),this.work.photo&&(this.renderedPhoto="https://webdev-api.loftschool.com/"+this.work.photo)},computed:c({},Object(n.c)("works",["getWorks"]),{renderedBackground:function(){return this.renderedPhoto?"background-image: url(".concat(this.renderedPhoto,");"):""}}),watch:{work:function(){this.newWork=c({},this.work),this.renderedPhoto="https://webdev-api.loftschool.com/"+this.work.photo}}},p=(r(360),r(92)),f=Object(p.a)(u,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit-field__intro"},[e("h3",{staticClass:"project-form__title"},[this._v("Редактирование работы")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"project-form-row project-form-row--btns"},[e("button",{staticClass:"cancel-btn",attrs:{type:"reset"}},[this._v("Отмена")]),e("button",{staticClass:"form-btn",attrs:{type:"submit"}},[this._v("Сохранить")])])}],!1,null,null,null);f.options.__file="src/admin/pages/projects/projects-add-new.vue";e.default=f.exports}}]);